#### ПЛАН ТЕСТИРОВАНИЯ ###

## Перечень автоматизируемых сценариев ##

**Предварительные условия:**

Для полей формы валидными данными следует считать:
1. Для поля "Номер карты" арабские цифры, от 12 до 19 шт.
2. Для поля "Месяц" арабские цифры от 01 до 12, не ранее текущего месяца в случае, если указан текущий год
3. Для поля "Год" арабские цифры 2 шт (последние цифры года)
4. Для поля "Владелец" символы латиницы, верхний регистр, дефис и пробел, кроме первого и последнего символа в записи
5. Для поля "CVC/CVV" арабские цифры 3 шт.

**Номера карт и их статусы для тестирования:**

1. 4444 4444 4444 4441, status APPROVED
2. 4444 4444 4444 4442, status DECLINED

**Позитивные тесты:**

1. Покупка тура с карты: заполнение формы валидными данными с использованием данных действующей карты (заполняем с пробелами) > сообщение об успешной покупке
2. Покупка тура в кредит: заполнение формы валидными данными с использованием данных действующей карты (заполняем с пробелами) > сообщение об успешном получении кредита
3. Покупка тура с карты: заполнение формы валидными данными с использованием данных действующей карты (заполняем без пробелов) > сообщение об успешной покупке
4. Покупка тура в кредит: заполнение формы валидными данными с использованием данных действующей карты (заполняем без пробелов) > сообщение об успешном получении кредита
5. Отказ в покупке тура с недействующей карты: заполнение формы валидными данными с использованием данных недействующей карты (заполняем с пробелами) > сообщение об отклонении покупки
6. Отказ в покупке тура в кредит с недействующей карты: заполнение формы валидными данными с использованием данных недействующей карты (заполняем с пробелами) > сообщение об отклонении покупки

**Проверка валидации**

1. Заполнение поля "Номер карты" 11 арабскими цифрами, прочие поля валидно > появление сообщения о некорректной длине поля
2. Заполнение поля "Номер карты" 20 арабскими цифрами, прочие поля валидно > появление сообщения о некорректной длине поля
3. Заполнение поля "Номер карты" 16 случайно сгенерированными арабскими цифрами, прочие поля валидно > появление сообщения об отклонении покупки
4. Заполнение поля "Номер карты" 19 случайно сгенерированными арабскими цифрами, прочие поля валидно > появление сообщения об отклонении покупки
5. Заполнение поля "Номер карты" символами, кроме арабских цифр, прочие поля валидно > появление сообщения о неверно введенном номере карты
6. Оставление поля "Номер карты" пустым, прочие поля валидно > появление сообщения о поле, обязательном для заполнения
7. Заполнение поля "Номер карты" нулями в количестве 16 штук, прочие поля валидно > появление сообщения о неверно введенном номере карты
8. Заполнение поля "Месяц" числом больше 12, прочие поля валидно > появление сообщения о неверно введенном значении
9. Заполнение поля "Месяц" числом 00, прочие поля валидно > появление сообщения о неверно введенном значении
10. Заполнение поля "Месяц" числом в формате ноль + арабское число от 1 до 9, прочие поля валидно > сообщение об успешной покупке
11. Заполнение поля "Месяц" числом в формате арабское число от 1 до 9, прочие поля валидно > сообщение об успешной покупке
12. Заполнение поля "Месяц" символами, кроме арабских цифр, прочие поля валидно > появление сообщения о неверно введенном значении
13. Заполнение поля "Месяц" номером месяца, меньше текущего, при поле "Год", заполненном текущим годом, прочие поля валидно > появление сообщения о неверно введенном значении
14. Оставление поля "Месяц" пустым, прочие поля валидно > появление сообщения о поле, обязательном для заполнения
15. Заполнение поля "Год" годом меньше текущего, прочие поля валидно > появление сообщения о неверно введенном значении
16. Заполнение поля "Год" нулями, прочие поля валидно > сообщение об успешной покупке
17. Оставление поля "Год" пустым, прочие поля валидно > появление сообщения о поле, обязательном для заполнения
18. Заполнение поля "Владелец" валидными данными с пробелом в середине, прочие поля валидно > сообщение об успешной покупке
19. Заполнение поля "Владелец" валидными данными с дефисом в середине, прочие поля валидно > сообщение об успешной покупке
20. Заполнение поля "Владелец" валидными данными с пробелом в начале, прочие поля валидно > появление сообщения о неверно введенном значении
21. Заполнение поля "Владелец" валидными данными с пробелом в конце, прочие поля валидно > появление сообщения о неверно введенном значении
22. Заполнение поля "Владелец" валидными данными с дефисом в начале, прочие поля валидно > появление сообщения о неверно введенном значении
23. Заполнение поля "Владелец" валидными данными с дефисом в конце, прочие поля валидно > появление сообщения о неверно введенном значении
24. Заполнение поля "Владелец" валидными данными в нижнем регистре, прочие поля валидно > автозамена регистра на верхний, сообщение об успешной покупке
25. Заполнения поля "Владелец" символами кириллицы, прочие поля валидно > появление сообщения о неверно введенном значении
26. Заполнения поля "Владелец" символами латиницы + арабскими цифрами, прочие поля валидно > появление сообщения о неверно введенном значении
27. Заполнения поля "Владелец" символами латиницы + спецсимволами, прочие поля валидно > появление сообщения о неверно введенном значении
28. Оставление поля "Владелец" пустым, прочие поля валидно > появление сообщения о поле, обязательном для заполнения
29. Заполнение поля "CVC/CVV" 2 арабскими цифрами, прочие поля валидно > появление сообщения о некорректной длине поля
30. Заполнение поля "CVC/CVV" 3 арабскими цифрами, прочие поля валидно > сообщение об успешной покупке
31. Заполнение поля "CVC/CVV" 4 арабскими цифрами, прочие поля валидно > обрезка лишнего символа
32. Заполнение поля "CVC/CVV" символами, кроме арабских цифр, прочие поля валидно > появление сообщения о неверно введенном значении
33. Оставление поля "CVC/CVV" пустым, прочие поля валидно > появление сообщения о поле, обязательном для заполнения
34. Оставление всех полей пустыми и нажатие кнопки "Продолжить" > появление сообщения о полях, обязательных для заполнения

**Тестирование API:**

1. Отправка валидного POST запроса платежа с действующей карты > появление записи о запросе в базе
2. Отправка валидного POST запроса кредита с действующей карты > появление записи о запросе в базе
3. Отправка валидного POST запроса платежа с недействующей карты > появление записи о запросе в базе
4. Отправка валидного POST запроса кредита с недействующей карты > появление записи о запросе в базе
5. Отправка пустого POST запроса платежа > отсутствие записи о запросе в базе и статуса
6. Отправка пустого POST запроса кредита > отсутствие записи о запросе в базе и статуса
7. Отправка POST запроса платежа с пустым значением number > отсутствие записи о запросе в базе и статуса
8. Отправка POST запроса кредита с пустым значением number > отсутствие записи о запросе в базе и статуса
9. Отправка POST запроса платежа с пустым значением month > отсутствие записи о запросе в базе и статуса
10. Отправка POST запроса кредита с пустым значением month > отсутствие записи о запросе в базе и статуса
11. Отправка POST запроса платежа с пустым значением year > отсутствие записи о запросе в базе и статуса
12. Отправка POST запроса кредита с пустым значением year > отсутствие записи о запросе в базе и статуса
13. Отправка POST запроса платежа с пустым значением holder > отсутствие записи о запросе в базе и статуса
14. Отправка POST запроса кредита с пустым значением holder > отсутствие записи о запросе в базе и статуса
15. Отправка POST запроса платежа с пустым значением cvc > отсутствие записи о запросе в базе и статуса
16. Отправка POST запроса кредита с пустым значением cvc > отсутствие записи о запросе в базе и статуса


## Перечень используемых инструментов ##

1. Основной инструмент IntelliJ IDEA (распространенный инструмент с большим количеством настроек, надежный, популярный, не вызывает вопросов у специалистов)
2. Язык программирования JAVA (распространенный, относительно простой, следовательно жизнеспособный для дальнейшей модификации тестов)
3. Система сборки Gradle (легче поддается настройке)
4. Библиотека JUnit (гибкость, доступность, постоянные обновления)
5. Фреймворки Selenide, REST Assured (простота в использовании, распространенность)
6. Дополнительно: Faker (для генерации тестовых данных), Lombok (для сокращения ручного написания кода)
7. Репортинг Allure (более сложные для такого проекта не требуются)

## Перечень и описание возможных рисков при автоматизации ##

1. "Поломка" тестов при изменении структуры сайта, добавлении/удалении/переименовании полей в форме, в том числе селекторов
2.  Поскольку тестирование производится не на реальном сайте, есть риск возникновения непредвиденных ошибок при запуске реального сайта
3.  Поскольку в качестве банковского сервиса выступает симулятор, то до конца протестировать все аспекты интеграции не представляется возможным
4.  Т.к. речь идет о постоянно меняющимся содержании предложения ("Тур дня"), то необходимо использовать только не привязанные ни к чему тестовые данные
5.  Возможны трудности из-за необходимости интеграции с двумя базами данных одновременно (MySQL, PostgreSQL)
6.  Из-за ограниченного количества предоставленных тестовых данных возможны возникновения непредвиденных ошибок при использовании сервисов на реальных данных пользователей
7.  Из-за отсутствия документации по сервису непонятно, какое поведение компонентов сервиса является приемлемым, а что считать ошибкой
8.  Тестирование и дальнейшее поддержание жизнеспособности тестов затрудняет отсутствие тестовых меток

## Интервальная оценка с учётом рисков в часах ##

1. Предварительная настройка и отладка SUT, баз и т.д. - 8-10
2. Написание автотестов - 30-35
3. Подготовка баг-репортов и отчета по прогону автотестов - 7-8
4. Подготовка отчета по результатам автоматизации 5-6
5. Подключение и отладка CI (необязательная задача) - (10-12)
Итого 50(60)-59(71) часов

## План сдачи работ ##

1. Написание автотестов 18.12.22
2. Подготовка баг-репортов и отчета по прогону автотестов 20.12.22
3. Подготовка отчета по результатам автоматизации 22.12.22
